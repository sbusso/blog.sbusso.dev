<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><meta name="description" content="A basic personal blog about technologies."><meta name="generator" content="11ty"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><title>How to replace Docker Desktop with Portainer</title><link href="https://unpkg.com/prismjs@1.25.0/themes/prism-solarizedlight.css" rel="stylesheet"><link rel="stylesheet" href="/site.css"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100&family=Source+Code+Pro&display=swap" rel="stylesheet"></head><body class="container mx-auto font-sans subpixel-antialiased leading-normal tracking-normal text-gray-900"><div class="container px-40"><nav class="flex flex-wrap items-center justify-between py-3 border-b"><a href="/" class="text-2xl font-semibold text-gray-900 font-poppins">htdocs<span class="text-gray-400">.dev</span></a><ul><li class="inline"><a href="/posts/multipass-portainer/" class="uppercase text-sm py-1 px-2 rounded mr-4 inline-block bg-black text-white">post</a></li></ul></nav><div class="container pt-10 mx-auto leading-6"><h1 class="text-3xl font-extralight">How to replace Docker Desktop with Portainer</h1><h2>Install Multipass</h2><p><a class="footnotes__ref" href="#Multipass-note" id="Multipass-ref" aria-describedby="footnotes-label" role="doc-noteref">Multipass</a> is a CLI to launch and manage VMs on Windows, Mac and Linux that simulates a cloud environment with support for cloud-init.</p><h2>Create a Virtual Machine</h2><p>Then we will create a new virtual machine with Portainer.</p><pre class="language-shell"><code class="language-shell">multipass launch --name ubuntu-docker --cloud-init docker.yaml</code></pre><p>Here is the full description of the cloud-init file:</p><pre class="language-yaml"><code class="language-yaml"><span class="token comment">#cloud-config.yaml</span><br><span class="token punctuation">---</span><br><span class="token key atrule">users</span><span class="token punctuation">:</span><br>  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ubuntu<br>    <span class="token key atrule">sudo</span><span class="token punctuation">:</span> ALL=(ALL) NOPASSWD<span class="token punctuation">:</span>ALL<br>    <span class="token key atrule">ssh-authorized-keys</span><span class="token punctuation">:</span><br>      <span class="token punctuation">-</span> ssh<span class="token punctuation">-</span>rsa AAAAB3Nza<span class="token punctuation">...</span>.<br><span class="token key atrule">package_update</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><br><span class="token key atrule">packages</span><span class="token punctuation">:</span><br>  <span class="token punctuation">-</span> docker<br>  <span class="token punctuation">-</span> avahi<span class="token punctuation">-</span>daemon<br>  <span class="token punctuation">-</span> apt<span class="token punctuation">-</span>transport<span class="token punctuation">-</span>https<br>  <span class="token punctuation">-</span> ca<span class="token punctuation">-</span>certificates<br>  <span class="token punctuation">-</span> curl<br>  <span class="token punctuation">-</span> gnupg<br>  <span class="token punctuation">-</span> lsb<span class="token punctuation">-</span>release<br><span class="token key atrule">runcmd</span><span class="token punctuation">:</span><br>  <span class="token punctuation">-</span> sudo curl <span class="token punctuation">-</span>fsSL https<span class="token punctuation">:</span>//get.docker.com <span class="token punctuation">|</span> sudo bash<br>  <span class="token punctuation">-</span> sudo systemctl enable docker<br>  <span class="token punctuation">-</span> sudo systemctl enable <span class="token punctuation">-</span>s HUP ssh<br>  <span class="token punctuation">-</span> sudo groupadd docker<br>  <span class="token punctuation">-</span> sudo usermod <span class="token punctuation">-</span>aG docker ubuntu<br>  <span class="token punctuation">-</span> docker volume create portainer_data<br>  <span class="token punctuation">-</span> docker network create portainer<br>  <span class="token punctuation">-</span> docker run <span class="token punctuation">-</span>d <span class="token punctuation">-</span>p 8000<span class="token punctuation">:</span>8000 <span class="token punctuation">-</span>p 9000<span class="token punctuation">:</span>9000 <span class="token punctuation">-</span><span class="token punctuation">-</span>name=portainer <span class="token punctuation">-</span><span class="token punctuation">-</span>net portainer\<br>    <span class="token punctuation">-</span><span class="token punctuation">-</span>restart=always <span class="token punctuation">-</span>v /var/run/docker.sock<span class="token punctuation">:</span>/var/run/docker.sock\<br>    <span class="token punctuation">-</span>v portainer_data<span class="token punctuation">:</span>/data portainer/portainer<span class="token punctuation">-</span>ce</code></pre><hr class="mt-10"><footer role="doc-endnotes" class="footnotes"><h2 id="footnotes-label" class="footnotes__title">Footnotes</h2><ol class="footnotes__list"><li id="Multipass-note" class="footnotes__list-item" role="doc-endnote">Download multipass: <a href="https://multipass.run/">(https://multipass.run/)</a> <a class="footnotes__back-link" href="#Multipass-ref" aria-label="Back to reference 1" role="doc-backlink">â†©</a></li></ol></footer></div></div></body></html>