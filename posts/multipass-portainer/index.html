<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><meta name="description" content="Notes about cloud technologies."><meta name="generator" content="11ty"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><title>How to replace Docker Desktop with Portainer</title><link href="https://cdn.jsdelivr.net/npm/prism-themes@1.9.0/themes/prism-duotone-dark.min.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js" defer="defer"></script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;600&family=Merriweather:wght@300;400;700&family=Poppins:wght@100&family=Source+Code+Pro&family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet"><link rel="stylesheet" href="/site.css"><script>document
                .querySelectorAll('pre > code')
                .forEach(function (codeBlock) {
                    var button = document.createElement('button');
                    button.className = 'copy-code-button';
                    button.type = 'button';
                    button.innerText = 'Copy';
                    console.log(codeBlock);
                    var pre = codeBlock.parentNode;
                    pre.insertBefore(button, codeBlock);

                });</script></head><body class="max-w-screen-xl p-5 mx-auto subpixel-antialiased leading-normal tracking-normal text-gray-900 font-pt"><div class="px-2 md:px-28 lg:px-48"><nav class="flex flex-wrap items-center justify-between pb-5"><a href="/" class="text-2xl uppercase font-thin text-gray-900">htdocs<span class="text-gray-400">.dev</span></a><ul><li class="inline"><a href="/" class="uppercase text-xl py-1 px-2 rounded ml-4 inline-block bg-gray-700 text-white">Posts</a></li><li class="inline"><a href="/cookbooks" class="uppercase text-xl py-1 px-2 rounded ml-4 inline-block text-gray-700 hover:text-gray-900">Cookbooks</a></li><li class="inline"><a href="/about" class="uppercase text-xl py-1 px-2 rounded ml-4 inline-block text-gray-700 hover:text-gray-900">About</a></li></ul></nav><div class="pt-10 leading-6"><article class="mt-16 md:prose-lg lg:prose-xl"><h1 class="font-sans text-3x font-extralight">How to replace Docker Desktop with Portainer</h1><div class="mb-20 -mt-6 text-gray-400 font-italic">12 Nov 2021</div><div class="heading-wrapper h2"><h2 id="install-multipass">Install Multipass</h2><a class="anchor" href="#install-multipass" aria-labelledby="install-multipass"><span hidden>#</span></a></div><p><a class="footnotes__ref" href="#Multipass-note" id="Multipass-ref" aria-describedby="footnotes-label" role="doc-noteref">Multipass</a> is a CLI to launch and manage VMs on Windows, Mac and Linux that simulates a cloud environment with support for cloud-init.</p><div class="heading-wrapper h2"><h2 id="create-a-virtual-machine">Create a Virtual Machine</h2><a class="anchor" href="#create-a-virtual-machine" aria-labelledby="create-a-virtual-machine"><span hidden>#</span></a></div><p>Then we will create a new virtual machine with Portainer.</p><pre class="language-shell"><code class="language-shell">multipass launch --name ubuntu-docker --cloud-init docker.yaml</code></pre><p>Here is the full description of the cloud-init file:</p><pre class="language-yaml"><code class="language-yaml"><span class="highlight-line"><span class="token comment"># cloud-config.yaml</span></span><br><span class="highlight-line"><span class="token punctuation">---</span></span><br><span class="highlight-line"><span class="token key atrule">users</span><span class="token punctuation">:</span></span><br><span class="highlight-line">  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ubuntu</span><br><span class="highlight-line">    <span class="token key atrule">sudo</span><span class="token punctuation">:</span> ALL=(ALL) NOPASSWD<span class="token punctuation">:</span>ALL</span><br><span class="highlight-line">    <span class="token key atrule">ssh-authorized-keys</span><span class="token punctuation">:</span></span><br><span class="highlight-line">      <span class="token punctuation">-</span> ssh<span class="token punctuation">-</span>rsa AAAAB3Nza<span class="token punctuation">...</span>.</span><br><span class="highlight-line"><span class="token key atrule">package_update</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span><br><span class="highlight-line"><span class="token key atrule">packages</span><span class="token punctuation">:</span></span><br><span class="highlight-line">  <span class="token punctuation">-</span> docker</span><br><span class="highlight-line">  <span class="token punctuation">-</span> avahi<span class="token punctuation">-</span>daemon</span><br><span class="highlight-line">  <span class="token punctuation">-</span> apt<span class="token punctuation">-</span>transport<span class="token punctuation">-</span>https</span><br><span class="highlight-line">  <span class="token punctuation">-</span> ca<span class="token punctuation">-</span>certificates</span><br><span class="highlight-line">  <span class="token punctuation">-</span> curl</span><br><span class="highlight-line">  <span class="token punctuation">-</span> gnupg</span><br><span class="highlight-line">  <span class="token punctuation">-</span> lsb<span class="token punctuation">-</span>release</span><br><span class="highlight-line"><span class="token key atrule">runcmd</span><span class="token punctuation">:</span></span><br><span class="highlight-line">  <span class="token punctuation">-</span> sudo curl <span class="token punctuation">-</span>fsSL https<span class="token punctuation">:</span>//get.docker.com <span class="token punctuation">|</span> sudo bash</span><br><span class="highlight-line">  <span class="token punctuation">-</span> sudo systemctl enable docker</span><br><span class="highlight-line">  <span class="token punctuation">-</span> sudo systemctl enable <span class="token punctuation">-</span>s HUP ssh</span><br><span class="highlight-line">  <span class="token punctuation">-</span> sudo groupadd docker</span><br><span class="highlight-line">  <span class="token punctuation">-</span> sudo usermod <span class="token punctuation">-</span>aG docker ubuntu</span><br><span class="highlight-line">  <span class="token punctuation">-</span> docker volume create portainer_data</span><br><span class="highlight-line">  <span class="token punctuation">-</span> docker network create portainer</span><br><span class="highlight-line">  <span class="token punctuation">-</span> docker run <span class="token punctuation">-</span>d <span class="token punctuation">-</span>p 8000<span class="token punctuation">:</span>8000 <span class="token punctuation">-</span>p 9000<span class="token punctuation">:</span>9000 <span class="token punctuation">-</span><span class="token punctuation">-</span>name=portainer <span class="token punctuation">-</span><span class="token punctuation">-</span>net portainer\</span><br><span class="highlight-line">    <span class="token punctuation">-</span><span class="token punctuation">-</span>restart=always <span class="token punctuation">-</span>v /var/run/docker.sock<span class="token punctuation">:</span>/var/run/docker.sock\</span><br><span class="highlight-line">    <span class="token punctuation">-</span>v portainer_data<span class="token punctuation">:</span>/data portainer/portainer<span class="token punctuation">-</span>ce</span></code></pre><footer role="doc-endnotes" class="footnotes"><h2 id="footnotes-label" class="footnotes__title">Footnotes</h2><ol class="footnotes__list"><li id="Multipass-note" class="footnotes__list-item" role="doc-endnote">Download multipass: <a href="https://multipass.run/">(https://multipass.run/)</a> <a class="footnotes__back-link" href="#Multipass-ref" aria-label="Back to reference 1" role="doc-backlink">â†©</a></li></ol></footer></article><div class="fixed bottom-0 right-0 p-0.5 text-sm text-gray-400 border-2 border-gray-200 border-solid rounded footer"><a class="hover:text-blue-400" href="#">11ty</a>, <a class="hover:text-blue-400" href="#">tailwind</a></div></div></div></body></html>